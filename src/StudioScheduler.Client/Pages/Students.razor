@page "/students"
@using MudBlazor

<PageTitle>Students - Studio Scheduler</PageTitle>

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-4">
    <MudText Typo="Typo.h4" GutterBottom="true">Students Management</MudText>
    
    <MudCard Class="mt-4">
        <MudCardHeader>
            <CardHeaderContent>
                <MudText Typo="Typo.h6">Student Directory</MudText>
            </CardHeaderContent>
            <CardHeaderActions>
                <MudButton Variant="Variant.Filled" 
                          Color="Color.Primary" 
                          StartIcon="@Icons.Material.Filled.Add">
                    Add New Student
                </MudButton>
            </CardHeaderActions>
        </MudCardHeader>
        <MudCardContent>
            <MudGrid>
                <MudItem xs="12" md="4">
                    <MudTextField @bind-Value="searchText" 
                                 Label="Search Students" 
                                 Variant="Variant.Outlined"
                                 Adornment="Adornment.Start" 
                                 AdornmentIcon="@Icons.Material.Filled.Search" />
                </MudItem>
                <MudItem xs="12" md="4">
                    <MudSelect @bind-Value="selectedLevel" 
                              Label="Filter by Level" 
                              Variant="Variant.Outlined">
                        <MudSelectItem Value="@("")">All Levels</MudSelectItem>
                        <MudSelectItem Value="@("P1")">Beginner (P1)</MudSelectItem>
                        <MudSelectItem Value="@("P2")">Beginner (P2)</MudSelectItem>
                        <MudSelectItem Value="@("P3")">Beginner (P3)</MudSelectItem>
                        <MudSelectItem Value="@("S1")">Intermediate (S1)</MudSelectItem>
                        <MudSelectItem Value="@("S2")">Intermediate (S2)</MudSelectItem>
                        <MudSelectItem Value="@("S3")">Advanced (S3)</MudSelectItem>
                    </MudSelect>
                </MudItem>
            </MudGrid>
            
            <MudDivider Class="my-4" />
            
            <MudDataGrid Items="@students" 
                        Filterable="true" 
                        SortMode="@SortMode.Multiple" 
                        Groupable="false">
                <Columns>
                    <PropertyColumn Property="x => x.Name" Title="Name" />
                    <PropertyColumn Property="x => x.Email" Title="Email" />
                    <PropertyColumn Property="x => x.Phone" Title="Phone" />
                    <PropertyColumn Property="x => x.Level" Title="Current Level" />
                    <PropertyColumn Property="x => x.JoinDate" Title="Join Date" Format="dd/MM/yyyy" />
                    <TemplateColumn Title="Actions">
                        <CellTemplate>
                            <MudIconButton Icon="@Icons.Material.Filled.Edit" 
                                          Size="Size.Small" 
                                          Color="Color.Primary" />
                            <MudIconButton Icon="@Icons.Material.Filled.Delete" 
                                          Size="Size.Small" 
                                          Color="Color.Error" />
                        </CellTemplate>
                    </TemplateColumn>
                </Columns>
            </MudDataGrid>
        </MudCardContent>
    </MudCard>
</MudContainer>

@code {
    private string searchText = "";
    private string selectedLevel = "";
    
    private List<StudentInfo> students = new()
    {
        new StudentInfo { Name = "Anna Kowalska", Email = "anna.kowalska@email.com", Phone = "123-456-789", Level = "P2", JoinDate = DateTime.Now.AddMonths(-3) },
        new StudentInfo { Name = "Piotr Nowak", Email = "piotr.nowak@email.com", Phone = "234-567-890", Level = "S1", JoinDate = DateTime.Now.AddMonths(-6) },
        new StudentInfo { Name = "Maria Wiśniewska", Email = "maria.wisniewska@email.com", Phone = "345-678-901", Level = "P3", JoinDate = DateTime.Now.AddMonths(-2) },
        new StudentInfo { Name = "Tomasz Wójcik", Email = "tomasz.wojcik@email.com", Phone = "456-789-012", Level = "S2", JoinDate = DateTime.Now.AddMonths(-8) },
        new StudentInfo { Name = "Katarzyna Krawczyk", Email = "katarzyna.krawczyk@email.com", Phone = "567-890-123", Level = "P1", JoinDate = DateTime.Now.AddMonths(-1) }
    };
    
    public class StudentInfo
    {
        public string Name { get; set; } = "";
        public string Email { get; set; } = "";
        public string Phone { get; set; } = "";
        public string Level { get; set; } = "";
        public DateTime JoinDate { get; set; }
    }
}
